<!DOCTYPE>
<html>
<head>
<meta charset="utf-8">
<title></title>
<style type="text/css">
html,body,ul,ol,p{margin:0;padding:0;}
.abc{width:600px;height:600px;margin:100px auto 0;}
</style>
</head>
<body>
	<div class="abc">
		<h1>使用Web Storage来做简易数据库示例</h1>
		<table>
			<tr><td>姓名：</td><td><input type="text" id="name"></td></tr>
			<tr><td>EMAIL：</td><td><input type="text" id="email"></td></tr>
			<tr><td>电话：</td><td><input type="text" id="tel"></td></tr>
			<tr><td>备注：</td><td><input type="text" id="memo"></td></tr>
			<tr>
				<td></td>
				<td><input type="button" value="保存" onclick="saveStorage();"></td>
			</tr>
		</table>
		<hr>
		<p>检索：
			<input type="text" id="find">
			<input type="button" value="检索" onclick="findStorage('msg');">
		</p>
		<p id="msg"></p>
	</div>
</body>
<script type="text/javascript">
//怎样将客户信息分几列进行保存呢？需要使用JSON格式。
//用这种JSON的格式作为文本来保存对象，获取该对象时再通过JSON格式来获取，就可以在Web Storage中保存和读取具有复杂结构的数据了。

//为了将数据保存在一个对象中，使用new Object语句创建了一个对象，将各种数据保存在该对象的各个属性中。
//JSON对象的stringify方法，将对象转换成JSON格式的文本数据。
//JSON对象的parse方法，将获取的JSON数据转换成javascript对象。
	function saveStorage(id){
		var data = new Object;
		data.name = document.getElementById('name').value;
		data.email = document.getElementById('email').value;
		data.tel = document.getElementById('tel').value;
		data.memo = document.getElementById('memo').value;
		var str = JSON.stringify(data);		//将对象转换成JSON格式的文本数据
		localStorage.setItem(data.name,str);
		alert('数据已保存。');
	}
	function findStorage(id){
		var find = document.getElementById('find').value;
		var str = localStorage.getItem(find);
		var data = JSON.parse(str);			//将获取的数据转换成JSON对象
		var result = '姓名：' + data.name + '<br>';
		result += 'EMAIL：' + data.email + '<br>';
		result += '电话：' + data.tel + '<br>';
		result += '备注：' + data.memo + '<br>';
		var target = document.getElementById(id);
		target.innerHTML = result;
	}
</script>
</html>